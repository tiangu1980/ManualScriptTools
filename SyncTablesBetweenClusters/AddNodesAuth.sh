#!/bin/bash

# 定义两组机器的IP地址数组
ipArray2=(
"10.59.218.181"
"10.59.218.182"
"10.59.218.183"
"10.59.218.184"
"10.59.218.185"
"10.59.218.193"
"10.59.218.191"
"10.59.218.192"
"10.59.218.194"
"10.59.218.195"
"10.59.218.196"
"10.59.218.197"
"10.59.218.198"
"10.59.218.199"
"10.59.218.200"
"10.59.218.186"
"10.59.218.187"
"10.59.218.188"
"10.59.218.189"
"10.59.218.190"
"10.59.218.201"
"10.59.218.202"
)

ipArray1=(
"100.88.37.2"
"100.88.37.30"
"100.88.37.31"
"100.88.36.243"
"100.88.37.17"
"100.88.36.249"
"100.88.36.247"
"100.88.36.250"
"100.88.37.3"
"100.88.37.16"
"100.88.37.14"
"100.88.37.32"
"100.88.36.244"
"100.88.36.245"
"100.88.36.246"
"100.88.37.7"
"100.88.36.248"
"100.88.37.12"
"100.88.36.242"
"100.88.36.254"
"100.88.37.0"
"100.88.37.18"
)

# 获取当前机器的IP地址
currentIp=$(hostname -I | cut -d' ' -f1)

# 查找当前IP在ipArray2中的索引
index=-1
for i in "${!ipArray2[@]}"; do
  if [[ "${ipArray2[i]}" == "$currentIp" ]]; then
    index=$i
    break
  fi
done

# 如果找到了匹配的IP，则打印对应的ipArray1中的元素
if [ "$index" -ge 0 ] && [ "$index" -lt "${#ipArray1[@]}" ]; then
  echo ${ipArray1[index]} > targetNode.txt
else
  echo "No Matching IP Found"
fi
